(this.webpackJsonplets=this.webpackJsonplets||[]).push([[0],{105:function(e,t,a){},106:function(e,t,a){},109:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(26),l=a.n(c),i=(a(59),a(46)),o=a(3),s=(a(60),a(61),a(49)),m=a.n(s),u=a(48),d=a.n(u),p=a(12),E=Object(n.createContext)(),h=function(e){var t=e.reducer,a=e.initialState,c=e.children;return r.a.createElement(E.Provider,{value:Object(n.useReducer)(t,a)},c)},g=function(){return Object(n.useContext)(E)},_=a(30),v=a.n(_),f=v.a.initializeApp({apiKey:"AIzaSyCfXTWZXmnkTxHi27zPKLhz-QAFwU2E2bQ",authDomain:"shop-mart-at-home.firebaseapp.com",databaseURL:"https://shop-mart-at-home.firebaseio.com",projectId:"shop-mart-at-home",storageBucket:"shop-mart-at-home.appspot.com",messagingSenderId:"680593903867",appId:"1:680593903867:web:db9d60a84ca2141cbb205e",measurementId:"G-FE6LZTHJ8Q"}).firestore(),b=v.a.auth();var O=function(){var e=g(),t=Object(o.a)(e,2),a=t[0],n=a.basket,c=a.user;return t[1],r.a.createElement("div",{className:"header"},r.a.createElement(p.b,{to:"/"},r.a.createElement("img",{className:"header__logo",src:"http://pngimg.com/uploads/amazon/amazon_PNG11.png",alt:""})),r.a.createElement("div",{className:"header__search"},r.a.createElement("input",{className:"header__searchInput",type:"text"}),r.a.createElement(d.a,{className:"header__searchIcon"})),r.a.createElement("div",{className:"header__nav"},r.a.createElement(p.b,{to:!c&&"/login"},r.a.createElement("div",{onClick:function(){c&&b.signOut()},className:"header__option"},r.a.createElement("span",{className:"header__optionLineOne"},"Hello ",c?null===c||void 0===c?void 0:c.email:"Guest"),r.a.createElement("span",{className:"header__optionLineTwo"},c?"Sign Out":"Sign In"))),r.a.createElement(p.b,{to:"/orders"},r.a.createElement("div",{className:"header__option"},r.a.createElement("span",{className:"header__optionLineOne"},"Returns"),r.a.createElement("span",{className:"header__optionLineTwo"},"& Orders"))),r.a.createElement("div",{className:"header__option"},r.a.createElement("span",{className:"header__optionLineOne"},"Your"),r.a.createElement("span",{className:"header__optionLineTwo"},"Prime")),r.a.createElement(p.b,{to:"/checkout"},r.a.createElement("div",{className:"header__optionBasket"},r.a.createElement(m.a,null),r.a.createElement("span",{className:"header__optionLineTwo header__basketCount"},null===n||void 0===n?void 0:n.length)))))};a(80);var N=function(e){var t=e.id,a=e.title,n=e.image,c=e.price,l=e.rating,i=g(),s=Object(o.a)(i,2),m=(s[0].basket,s[1]);return r.a.createElement("div",{className:"product"},r.a.createElement("div",{className:"product__info"},r.a.createElement("p",null,a),r.a.createElement("p",{className:"product__price"},r.a.createElement("small",null,"$"),r.a.createElement("strong",null,c)),r.a.createElement("div",{className:"product__rating"},Array(l).fill().map((function(e,t){return r.a.createElement("p",null,"\ud83c\udf1f")})))),r.a.createElement("img",{src:n,alt:""}),r.a.createElement("button",{onClick:function(){m({type:"ADD_TO_BASKET",item:{id:t,title:a,image:n,price:c,rating:l}})}},"Add to Basket"))};a(81);var j=function(){return r.a.createElement("div",{className:"home"},r.a.createElement("div",{className:"home__container"},r.a.createElement("img",{className:"home__image",src:"https://images-eu.ssl-images-amazon.com/images/G/02/digital/video/merch2016/Hero/Covid19/Generic/GWBleedingHero_ENG_COVIDUPDATE__XSite_1500x600_PV_en-GB._CB428684220_.jpg",alt:""}),r.a.createElement("div",{className:"home__row"},r.a.createElement(N,{id:"123456789",title:"Apple iPhone 11 Pro Max (64GB) - Midnight Green",price:1e3,image:"https://images-na.ssl-images-amazon.com/images/I/61ers6OzvUL._SL1024_.jpg",rating:5}),r.a.createElement(N,{id:"123056089",title:"Mathey-Tissot Analog Black Dial Men's Watch-H901AN",price:200,image:"https://images-na.ssl-images-amazon.com/images/I/61x1hbzwXrL._UL1440_.jpg",rating:4}),r.a.createElement(N,{id:"456789001",title:" Inalsa Power Blender MERAK-2000W with 100% Pure Copper Motor & Variable Speed| 8 Leaf High-Quality Stainless-Steel Blade| Includes BPA-Free Tritan Jar",price:85,image:"https://images-na.ssl-images-amazon.com/images/I/61Oos0SxjPL._SL1200_.jpg",rating:3})),r.a.createElement("div",{className:"home__row"},r.a.createElement(N,{id:"234567891",title:"Lenovo Legion 5i 10th Gen Intel Core i7 15.6 inch Full HD Gaming Laptop (16GB/1TB HDD + 256GB SSD/Windows 10/120 Hz/NVIDIA GTX 1650Ti 4GB GDDR6 Graphics/Phantom Black)",price:1200,image:"https://images-na.ssl-images-amazon.com/images/I/61p3lA4N3uL._SL1000_.jpg",rating:4}),r.a.createElement(N,{id:"987654321",title:"Cracking the Coding Interview. The Data Structures & Algorithms Interview Questions You'll Be Asked Most Likely In Your Interviews",price:10,image:"https://images-na.ssl-images-amazon.com/images/I/41p1cRZGtaL._SX348_BO1,204,203,200_.jpg",rating:5})),r.a.createElement("div",{className:"home__row"},r.a.createElement(N,{id:"985604221",title:"HONOR Band 5 (MidnightNavy)- Waterproof Full Color AMOLED Touchscreen, SpO2 (Blood Oxygen), Music Control, Watch Faces Store, up to 14 Day Battery Life",price:30,image:"https://images-na.ssl-images-amazon.com/images/I/810jwmTfQML._SL1500_.jpg",rating:4}),r.a.createElement(N,{id:"765432198",title:"Echo Dot (3rd Gen) \u2013 New and improved smart speaker with Alexa (Black)",price:50,image:"https://images-na.ssl-images-amazon.com/images/I/61EXU8BuGZL._SL1100_.jpg",rating:3}),r.a.createElement(N,{id:"654321002",title:"OnePlus Y Series 108 cm (43 inches) Full HD LED Smart Android TV 43Y1 (Black) (2020 Model)",price:360,image:"https://images-na.ssl-images-amazon.com/images/I/81kmtB1326L._SL1500_.jpg",rating:5}))))},k=a(5);a(82),a(83);var y=function(e){var t=e.id,a=e.image,n=e.title,c=e.price,l=e.rating,i=e.hideButton,s=g(),m=Object(o.a)(s,2),u=(m[0].basket,m[1]);return r.a.createElement("div",{className:"checkoutProduct"},r.a.createElement("img",{className:"checkoutProduct__image",src:a,alt:""}),r.a.createElement("div",{className:"checkoutProduct__info"},r.a.createElement("p",{className:"checkoutProduct__title"},n),r.a.createElement("p",{className:"checkoutProduct__price"},r.a.createElement("strong",null,"$"),r.a.createElement("strong",null,c)),r.a.createElement("div",{className:"checkoutProduct__rating"},Array(l).fill().map((function(e,t){return r.a.createElement("p",null,"\ud83c\udf1f")}))),!i&&r.a.createElement("button",{onClick:function(){u({type:"REMOVE_FROM_BASKET",id:t})}},"Remove from basket")))},S=(a(84),a(21)),w=a.n(S),T=a(33),B=a(17),C=function(e){return null===e||void 0===e?void 0:e.reduce((function(e,t){return t.price+e}),0)},L=function(e,t){switch(t.type){case"ADD_TO_BASKET":return Object(B.a)(Object(B.a)({},e),{},{basket:[].concat(Object(T.a)(e.basket),[t.item])});case"EMPTY_BASKET":return Object(B.a)(Object(B.a)({},e),{},{basket:[]});case"REMOVE_FROM_BASKET":var a=e.basket.findIndex((function(e){return e.id===t.id})),n=Object(T.a)(e.basket);return a>=0?n.splice(a,1):console.warn("Cant remove product (id: ".concat(t,") as its not in the basket!")),Object(B.a)(Object(B.a)({},e),{},{basket:n});case"SET_USER":return Object(B.a)(Object(B.a)({},e),{},{user:t.user});default:return e}};var A=function(){var e=Object(k.f)(),t=g(),a=Object(o.a)(t,2),n=a[0].basket;return a[1],r.a.createElement("div",{className:"subtotal"},r.a.createElement(w.a,{renderText:function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement("p",null,"Subtotal (",n.length," items):",r.a.createElement("strong",null," ".concat(e))),r.a.createElement("small",{className:"subtotal__gift"},r.a.createElement("input",{type:"checkbox"}),"This Order Contains a gift"))},decimalScale:2,value:C(n),displayType:"text",thousandSeparator:!0,prefix:"$"}),r.a.createElement("button",{onClick:function(t){return e.push("/payment")}},"Proceed to Checkout"))};var x=function(){var e=g(),t=Object(o.a)(e,2),a=t[0],n=a.basket,c=a.user;return t[1],r.a.createElement("div",{className:"checkout"},r.a.createElement("div",{className:"checkout__left"},r.a.createElement("img",{className:"checkout__ad",src:"https://images-na.ssl-images-amazon.com/images/G/02/UK_CCMP/TM/OCC_Amazon1._CB423492668_.jpg",alt:""}),r.a.createElement("div",null,r.a.createElement("h3",null,"Hello ",c?null===c||void 0===c?void 0:c.email:"Guest",","),r.a.createElement("h2",{className:"checkout__title"},"Your cart"),n.map((function(e){return r.a.createElement(y,{id:e.id,image:e.image,title:e.title,price:e.price,rating:e.rating})})))),r.a.createElement("div",{className:"checkout__right"},r.a.createElement(A,null)))};a(86);var I=function(){var e=Object(n.useState)(""),t=Object(o.a)(e,2),a=t[0],c=t[1],l=Object(n.useState)(""),i=Object(o.a)(l,2),s=i[0],m=i[1],u=Object(k.f)();return r.a.createElement("div",{className:"login"},r.a.createElement(p.b,{to:"/"},r.a.createElement("img",{className:"login__logo",src:"https://1000logos.net/wp-content/uploads/2019/07/Amazon-logo-2000%E2%80%93present.jpg",alt:""})),r.a.createElement("div",{className:"login__container"},r.a.createElement("h1",null,"Sign-in"),r.a.createElement("form",null,r.a.createElement("h5",null,"E-mail"),r.a.createElement("input",{type:"text",value:a,onChange:function(e){return c(e.target.value)}}),r.a.createElement("h5",null,"Password"),r.a.createElement("input",{type:"password",value:s,onChange:function(e){return m(e.target.value)}}),r.a.createElement("button",{type:"submit",onClick:function(e){e.preventDefault(),b.signInWithEmailAndPassword(a,s).then((function(e){u.push("/")})).catch((function(e){return alert(e.message)}))},className:"login__signInButton"},"Sign In")),r.a.createElement("p",null,"By signing-in, you agree to Shop From Home's Conditions of Use and Privacy Notice."),r.a.createElement("button",{onClick:function(e){e.preventDefault(),b.createUserWithEmailAndPassword(a,s).then((function(e){e&&u.push("/")})).catch((function(e){return alert(e.message)}))},type:"submit",className:"login__registerButton"},"Create Your Account")))},P=a(23),D=a.n(P),M=a(32),G=(a(88),a(20)),z=a(50),H=a.n(z).a.create({baseURL:"http://localhost:5001/shop-mart-at-home/us-central1/api"});var R=function(){var e=g(),t=Object(o.a)(e,2),a=t[0],c=a.basket,l=a.user,i=t[1],s=Object(k.f)(),m=Object(G.useStripe)(),u=Object(G.useElements)(),d=Object(n.useState)(""),E=Object(o.a)(d,2),h=E[0],_=E[1],v=Object(n.useState)(!1),b=Object(o.a)(v,2),O=b[0],N=b[1],j=Object(n.useState)(null),S=Object(o.a)(j,2),T=S[0],B=S[1],L=Object(n.useState)(!0),A=Object(o.a)(L,2),x=A[0],I=A[1],P=Object(n.useState)(!0),z=Object(o.a)(P,2),R=z[0],F=z[1];Object(n.useEffect)((function(){(function(){var e=Object(M.a)(D.a.mark((function e(){var t;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,H({method:"post",url:"/payments/create?total=".concat(100*C(c))});case 2:t=e.sent,F(t.data.clientSecret);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[c]);var K=function(){var e=Object(M.a)(D.a.mark((function e(t){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),_(!0),e.next=4,m.confirmCardPayment(R,{payment_method:{card:u.getElement(G.CardElement)}}).then((function(e){var t=e.paymentIntent;f.collection("users").doc(null===l||void 0===l?void 0:l.uid).collection("orders").doc(t.id).set({basket:c,amount:t.amount,created:t.created}),N(!0),B(null),_(!1),i({type:"EMPTY_BASKET"}),s.replace("/orders")}));case 4:e.sent;case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:"payment"},r.a.createElement("div",{className:"payment__container"},r.a.createElement("h1",null,"Checkout (",r.a.createElement(p.b,{to:"/checkout"},null===c||void 0===c?void 0:c.length," items"),")"),r.a.createElement("div",{className:"payment__section"},r.a.createElement("div",{className:"payment__title"},r.a.createElement("h3",null,"Delivery Address")),r.a.createElement("div",{className:"payment__address"},r.a.createElement("p",null,l?null===l||void 0===l?void 0:l.email:"Guest"),r.a.createElement("textarea",{cols:"30",rows:"5",placeholder:"Enter address"}))),r.a.createElement("div",{className:"payment__section"},r.a.createElement("div",{className:"payment__title"},r.a.createElement("h3",null,"Review items and delivery")),r.a.createElement("div",{className:"payment__items"},c.map((function(e){return r.a.createElement(y,{id:e.id,image:e.image,title:e.title,price:e.price,rating:e.rating})})))),r.a.createElement("div",{className:"payment__section"},r.a.createElement("div",{className:"payment__title"},r.a.createElement("h3",null,"Payment Method")),r.a.createElement("div",{className:"payment__details"},r.a.createElement("form",{onSubmit:K},r.a.createElement(G.CardElement,{onChange:function(e){I(e.empty),B(e.error?e.error.message:"")}}),r.a.createElement("div",{className:"payment__priceContainer"},r.a.createElement(w.a,{renderText:function(e){return r.a.createElement("h3",null,"Order Total: ",e)},decimalScale:2,value:C(c),displayType:"text",thousandSeparator:!0,prefix:"$"}),r.a.createElement("button",{disabled:h||x||O},r.a.createElement("span",null,h?r.a.createElement("p",null,"Processing"):"Buy now"))),T&&r.a.createElement("div",null,T))))))},F=a(51),K=(a(105),a(106),a(52)),U=a.n(K);var Y=function(e){var t,a=e.order;return r.a.createElement("div",{className:"order"},r.a.createElement("h2",null,"Order"),r.a.createElement("p",null,U.a.unix(a.data.created).format("MMMM Do YYYY, h:mma")),r.a.createElement("p",{className:"order__id"},r.a.createElement("small",null,a.id)),null===(t=a.data.basket)||void 0===t?void 0:t.map((function(e){return r.a.createElement(y,{id:e.id,image:e.image,title:e.title,price:e.price,rating:e.rating,hideButton:!0})})),r.a.createElement(w.a,{renderText:function(e){return r.a.createElement("h3",{className:"order__total"},"Order Total: ",e)},decimalScale:2,value:a.data.amount/100,displayType:"text",thousandSeparator:!0,prefix:"$"}))};var W=function(){var e=g(),t=Object(o.a)(e,2),a=t[0],c=(a.basket,a.user),l=(t[1],Object(n.useState)([])),i=Object(o.a)(l,2),s=i[0],m=i[1];return Object(n.useEffect)((function(){c?f.collection("users").doc(null===c||void 0===c?void 0:c.uid).collection("orders").orderBy("created","desc").onSnapshot((function(e){return m(e.docs.map((function(e){return{id:e.id,data:e.data()}})))})):m([])}),[c]),r.a.createElement("div",{className:"orders"},r.a.createElement("h1",null,"Your Orders"),r.a.createElement("div",{className:"orders__order"},null===s||void 0===s?void 0:s.map((function(e){return r.a.createElement(Y,{order:e})}))))},X=Object(F.a)("pk_test_51HTQJjCwCvokgQhPy6dKKX8sVjO6z1KTLTjKdiHLq8JH5lfvpaqxDH28DLFFVNk3H55U1NlXoL4JXA7gwJiXngxQ00Gf2mxEFx");var Q=function(){var e=g(),t=Object(o.a)(e,2);Object(i.a)(t[0]);var a=t[1];return Object(n.useEffect)((function(){b.onAuthStateChanged((function(e){a(e?{type:"SET_USER",user:e}:{type:"SET_USER",user:null})}))}),[]),r.a.createElement(p.a,null,r.a.createElement("div",{className:"app"},r.a.createElement(k.c,null,r.a.createElement(k.a,{path:"/orders"},r.a.createElement(O,null),r.a.createElement(W,null)),r.a.createElement(k.a,{path:"/login"},r.a.createElement(I,null)),r.a.createElement(k.a,{path:"/checkout"},r.a.createElement(O,null),r.a.createElement(x,null)),r.a.createElement(k.a,{path:"/payment"},r.a.createElement(O,null),r.a.createElement(G.Elements,{stripe:X},r.a.createElement(R,null))),r.a.createElement(k.a,{path:"/"},r.a.createElement(O,null),r.a.createElement(j,null)))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(h,{initialState:{basket:[],user:null},reducer:L},r.a.createElement(Q,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},54:function(e,t,a){e.exports=a(109)},59:function(e,t,a){},60:function(e,t,a){},61:function(e,t,a){},80:function(e,t,a){},81:function(e,t,a){},82:function(e,t,a){},83:function(e,t,a){},84:function(e,t,a){},86:function(e,t,a){},88:function(e,t,a){}},[[54,1,2]]]);
//# sourceMappingURL=main.20cc0907.chunk.js.map